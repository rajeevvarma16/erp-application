<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}ERP App{% endblock %}</title>
  <style>

    table {
        border-collapse: collapse;
        width: 90%;
        margin-top: 20px;
    }

    th, td {
        border: 1px solid #ccc;
        padding: 10px;
    }

    th {
        background-color: #333;
        color: white;
    }
    tr:nth-child(even) {
        background-color: #f7f7f7;
    }

    tr:hover {background-color: #D6EEEE;}




    ul {
      list-style-type: none;
      margin: 0;
      padding: 0;
      overflow: hidden;
      background-color: #333333;
      display: flex;
      position: fixed;
      top: 0;
      width: 100%;
    }
    ul li a {
      display: block;
      color: white;
      text-align: center;
      padding: 14px 16px;
      text-decoration: none;
    }
    ul li a:hover {
      background-color: #111111;
    }
    body { margin-top: 60px; font-family: sans-serif; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

</head>
<body>
  <!-- ðŸ”¹ Common header -->
  <ul>
    <li><a href="{{ url_for('protected') }}">Home</a></li>
    <li><a href="{{ url_for('inventory') }}">Inventory</a></li>
    <li><a href="{{ url_for('vendors') }}">Vendors</a></li>
    <li><a href="{{ url_for('employees') }}">Employees</a></li>
    <li><a href="{{ url_for('customers') }}">Customers</a></li>
    <li><a href="{{ url_for('logout') }}">Logout</a></li>

    <!-- <li><a href="{{ url_for('employees') }}">WorkOrders</a></li>
    <li><a href="{{ url_for('customers') }}">Sales Orders</a></li>
    <li><a href="{{ url_for('logout') }}">Purchase Orders</a></li>

    <li><a href="{{ url_for('employees') }}">Scheduling</a></li>
    <li><a href="{{ url_for('customers') }}"> AI chatbot with language  </a></li>
    <li><a href="{{ url_for('logout') }}">Auto cad</a></li>

    <li><a href="{{ url_for('logout') }}">Finance</a></li> -->

    

  </ul>

  <!-- ðŸ”¹ Page-specific content -->
  {% block content %}{% endblock %}

  <!-- Floating AI Button -->
<div id="ai-button" 
style="position: fixed; bottom: 20px; right: 20px; 
       background: #0d6efd; color: white; 
       width: 60px; height: 60px; border-radius: 50%; 
       display: flex; justify-content: center; align-items: center; 
       font-size: 24px; cursor: pointer; box-shadow: 0px 4px 10px rgba(0,0,0,0.2);">
AI
</div>

<!-- Chat Popup -->
<div id="ai-chatbox" 
style="position: fixed; bottom: 90px; right: 20px; width: 300px; 
       height: 380px; background: white; border-radius: 10px; 
       display: none; flex-direction: column; 
       box-shadow: 0px 4px 20px rgba(0,0,0,0.25); overflow: hidden;">

<div style="background:#0d6efd; color:white; padding:10px; text-align:center;">
   AI Assistant
</div>

<div id="chat-area" 
    style="flex:1; padding:10px; overflow-y:auto; font-size:14px;">
</div>

<div style="padding:10px; display:flex; gap:5px;">
   <input id="ai-input" placeholder="Ask..." 
          style="flex:1; padding:6px; border:1px solid #ccc; border-radius:4px;">
   <button onclick="sendAIMessage()" 
           style="padding:6px 10px; background:#0d6efd; color:white; border:none; border-radius:4px;">
       Send
   </button>
</div>
</div>

<script>
document.getElementById("ai-button").onclick = () => {
const box = document.getElementById("ai-chatbox");
box.style.display = (box.style.display === "none") ? "flex" : "none";
};

async function sendAIMessage() {
const msg = document.getElementById("ai-input").value;
if (!msg) return;

document.getElementById("chat-area").innerHTML += "<p><b>You:</b> " + msg + "</p>";

const res = await fetch("/api/chatbot", {
   method: "POST",
   headers: { "Content-Type": "application/json" },
   body: JSON.stringify({ query: msg })
});

const data = await res.json();
document.getElementById("chat-area").innerHTML += "<p><b>AI:</b> " + data.reply + "</p>";

document.getElementById("ai-input").value = "";
document.getElementById("chat-area").scrollTop = document.getElementById("chat-area").scrollHeight;
}
</script>

</body>
</html>
